⎕IO←0
p←2 2∘⍴¨⍎¨¨'\d+'⎕S'&'¨⊃⎕NGET'p5.txt'1
to←{⍺=⍵:⍺ ⋄ ⍺+(×⍵-⍺)×⍳1+|⍺-⍵}
f←{x1 y1 x2 y2←,⍵ ⋄ (x1 to x2),[0.5]y1 to y2}
+/1<{≢⍵}⌸⊃⍪/f¨p⌿⍨∨⌿¨=⌿¨p ⍝ part 1
+/1<{≢⍵}⌸⊃⍪/f¨p ⍝ part 2
