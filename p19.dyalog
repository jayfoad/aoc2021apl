⎕IO←0
p←↑¨⍎¨¨'-'⎕R'¯'¨¨1↓¨{⍵⊆⍨×≢¨⍵}⊃⎕NGET'p19.txt'1
m←↑{∪⍵,,({⍵(1⌽1⊖⍵)}3 3⍴1 0 0 0 0 1 0 ¯1 0)∘.(+.×)⍵}⍣≡,⊂∘.=⍨⍳3
q←0
a←(⊃p){0=≢⍵:⍺ ⋄ i j←⊃⍸12≤⊢/z←↑⍺∘{{{⍵⌷⍨r⍳⌈/r←⊢/⍵}{⍺,≢⍵}⌸⍵}⍤2,[1 2]⍵-⍤1⍤1 2⊢⍺}¨m∘(+.×⍤2 1⍤2 2)¨⍵ ⋄ (∪⍺⍪((j⌷m)+.×⍤2 1⍤2 2⊢i⊃⍵)-⍤1⊢d⊣q⌈←+/|d←i j(⍳3)⌷z)∇⍵/⍨i≠⍳≢⍵}1↓p
≢a ⍝ part 1
q ⍝ part 2
