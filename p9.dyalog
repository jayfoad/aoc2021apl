p←⍎¨↑⊃⎕NGET'p9.txt'1
+/,(1+p)×{⍵<{⌊/(9⍴0 1)/,⍵}⌺3 3⊢⍵}p-10 ⍝ part 1
a←{⍵⌿⍨∧/9≠(,p)[⍵]}{↑(,2,⌿⍵),,2,/⍵}(⍴p)⍴⍳≢,p ⍝ adjacency
×/3↑{⍵[⍒⍵]}{≢⍵}⌸{w⊣w[a]⌊←2/⍪⌊/w[a]⊣w←⍵}⍣≡⍳≢,p ⍝ part 2
